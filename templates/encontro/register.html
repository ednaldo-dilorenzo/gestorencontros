{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% include '../components/toasts.html' %}
{% endif %}
{% endwith %}
<h2 class="fs-4">Cadastro de Encontro</h2>
<hr>
<form action="{{ url_for('encontro.register') }}{% if form.id.data %}/{{ form.id.data }}{% endif %}" target="/pages{{ url_for('encontro.index') }}" method="post"
    novalidate>
    {{ form.csrf_token }}
    <input type="hidden" name="id" value="{% if form.id.data %}{{ form.id.data }}{% endif %}">
    <div class="row g-3">
        <div class="col-md-6">
            <label for="iptNome" class="form-label">Nome</label>
            <input type="text" value="{% if form.nome.data %}{{ form.nome.data }}{% endif %}" required
                name="nome" class="form-control" id="iptNome">
        </div>        
    </div>
    <hr class="my-4">
    <div class="row g-3">
        <div class="col-6">
            <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                <a href="/pages{{ url_for('encontro.index') }}" style="width: 100px" class="btn btn-secondary" type="button" data-link>Cancelar</a>
            </div>
        </div>
        <div class="col-6">
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="submit" style="width: 100px" class="btn btn-dark" type="button">Salvar</button>
            </div>
        </div>
    </div>
</form>
<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (() => {
    "use strict";

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    const form = document.querySelector("form");
    const formValidations = [
      {
        selector: "#iptNome",
        validations: [
          { handler: isRequired, message: "Por favor informe o nome" },
        ],
      },
    ];

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      event.stopPropagation();
      form.classList.add("was-validated");

      if (validateForm(formValidations)) {
        sendFormData(form);
      }      
    });
  })();
</script>
